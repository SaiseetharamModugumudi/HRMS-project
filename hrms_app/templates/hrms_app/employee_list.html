{% extends 'hrms_app/base.html' %}

{% block title %}Employees - HRMS{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Employee Management</h2>
    <a href="/admin/hrms_app/employee/add/" class="btn btn-primary">Add New Employee</a>
</div>

<div class="filters-section">
    <form method="get" class="filter-form">
        <div class="form-group">
            <label for="search">Search:</label>
            <input type="text" name="search" id="search" value="{{ search_query|default:'' }}" placeholder="Search by name, email, or ID">
        </div>
        <div class="form-group">
            <label for="department">Department:</label>
            <select name="department" id="department">
                <option value="">All Departments</option>
                {% for dept_code, dept_name in departments %}
                    <option value="{{ dept_code }}" {% if selected_department == dept_code %}selected{% endif %}>
                        {{ dept_name }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-secondary">Filter</button>
        <a href="{% url 'hrms_app:employee_list' %}" class="btn btn-outline">Clear</a>
    </form>
</div>

<div class="employee-table-container">
    {% if employees %}
        <table class="data-table">
            <thead>
                <tr>
                    <th>Employee ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Designation</th>
                    <th>Department</th>
                    <th>Date of Joining</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees %}
                    <tr>
                        <td>{{ employee.employee_id }}</td>
                        <td>{{ employee.name }}</td>
                        <td>{{ employee.email }}</td>
                        <td>{{ employee.phone }}</td>
                        <td>{{ employee.designation }}</td>
                        <td><span class="badge badge-{{ employee.department|lower }}">{{ employee.department }}</span></td>
                        <td>{{ employee.date_of_joining }}</td>
                        <td>
                            <a href="{% url 'hrms_app:employee_detail' employee.id %}" class="btn btn-sm btn-primary">View</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="no-data">
            <p>No employees found. <a href="/admin/hrms_app/employee/add/">Add your first employee</a></p>
        </div>
    {% endif %}
</div>
{% endblock %}

